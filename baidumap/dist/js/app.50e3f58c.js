(function(){var e={8484:function(e,t,a){"use strict";var l=a(8935),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("mapVue")],1)},o=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"componentDiv"},[a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{staticStyle:{height:"100%"},attrs:{span:4}},[a("el-form",{ref:"form",staticStyle:{margin:"30px 10px 0"},attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"公司名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"药物大类",prop:"dugClass"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.dugClass,callback:function(t){e.$set(e.form,"dugClass",t)},expression:"form.dugClass"}},[a("el-option",{attrs:{label:"请选择",value:""}}),a("el-option",{attrs:{label:"生物药",value:"生物药"}}),a("el-option",{attrs:{label:"化药",value:"化药"}}),a("el-option",{attrs:{label:"生物药/化药",value:"生物药/化药"}}),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),a("el-form-item",{attrs:{label:"具体类型",prop:"classInfo"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.classInfo,callback:function(t){e.$set(e.form,"classInfo",t)},expression:"form.classInfo"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.classInfoArr,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],2)],1),a("el-form-item",{attrs:{label:"公司规模",prop:"size"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.size,callback:function(t){e.$set(e.form,"size",t)},expression:"form.size"}},[a("el-option",{attrs:{label:"请选择",value:""}}),a("el-option",{attrs:{label:"50人以下",value:"50人以下"}}),a("el-option",{attrs:{label:"50~100人",value:"50~100人"}}),a("el-option",{attrs:{label:"100~500人",value:"100~500人"}}),a("el-option",{attrs:{label:"500~1000人",value:"500~1000人"}}),a("el-option",{attrs:{label:"1000人以上",value:"1000人以上"}})],1)],1),a("el-form-item",{attrs:{label:"公司性质",prop:"nature"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.nature,callback:function(t){e.$set(e.form,"nature",t)},expression:"form.nature"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.natureArr,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],2)],1),a("el-form-item",{attrs:{label:"是否上市",prop:"inMarket"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.inMarket,callback:function(t){e.$set(e.form,"inMarket",t)},expression:"form.inMarket"}},[a("el-option",{attrs:{label:"请选择",value:""}}),a("el-option",{attrs:{label:"是",value:"是"}}),a("el-option",{attrs:{label:"否",value:"否"}})],1)],1),a("el-form-item",{attrs:{label:"所在省",prop:"province"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},[a("el-option",{attrs:{label:"请选择",value:""}}),a("el-option",{attrs:{label:"江苏省",value:"江苏省"}}),a("el-option",{attrs:{label:"浙江省",value:"浙江省"}})],1)],1),a("el-form-item",{attrs:{label:"所在市",prop:"city"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},[a("el-option",{attrs:{label:"请选择",value:""}}),a("el-option",{attrs:{label:"南京市",value:"南京市"}}),a("el-option",{attrs:{label:"苏州市",value:"苏州市"}}),a("el-option",{attrs:{label:"泰州市",value:"泰州市"}}),a("el-option",{attrs:{label:"杭州市",value:"杭州市"}}),a("el-option",{attrs:{label:"上海市",value:"上海市"}})],1)],1),a("el-form-item",{attrs:{label:"生产规模",prop:"productionSize"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.productionSize,callback:function(t){e.$set(e.form,"productionSize",t)},expression:"form.productionSize"}},[a("el-option",{attrs:{label:"请选择",value:""}}),a("el-option",{attrs:{label:"50L-100L",value:"50L-100L"}}),a("el-option",{attrs:{label:"100L-500L",value:"100L-500L"}}),a("el-option",{attrs:{label:"500L-2000L",value:"500L-2000L"}}),a("el-option",{attrs:{label:"2000L-10000L",value:"2000L-10000L"}}),a("el-option",{attrs:{label:"10000L以上",value:"10000L以上"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),a("el-button",{on:{click:function(t){return e.resetData()}}},[e._v("重置")])],1)],1)],1),a("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[a("baidu-map",{staticClass:"mapStyle",attrs:{id:"map",center:e.centerPoint,zoom:9,"scroll-wheel-zoom":!0},on:{ready:e.handler}})],1)],1)],1)},i=[],r=(a(8675),a(3462),a(6699),a(3245)),p=a.n(r);const c=["抗体","重组蛋白","细胞治疗","基因治疗","ADC","RDC","mRNA"," 干细胞","多肽","疫苗","激素、细胞因子","血液制品","其他生物药","化学药物","非药物","其他信息"],u=["CRO","CDMO","耗材商","仪器商","自研药","其他第三方","CDMO+自研药"];var f={data(){return{fullscreenLoading:!0,form:{name:"",size:"",nature:"",dugClass:"",classInfo:"",productionSize:"",inMarket:"",province:"",city:""},classInfoArr:c,natureArr:u,mapData:[],BMap:null,map:null,centerPoint:{lng:116.404,lat:39.915},markerArr:[],allData:[],markerPoint:{},content:"",err:"",xlsxJson:{},importHeader:["shortName","name","size","nature","inMarket","dugClass","classInfo","hasDevTeam","hasPoisonTeam","hasCMCTeam","hasClinicTeam","hasCommercialProd","hasPreparationLine","productionSize","province","city","adress","otherInfo"],expectData:[]}},methods:{handler({BMap:e,map:t}){let a=this,l=new e.Geolocation;l.getCurrentPosition((function(l){a.BMap=e,a.map=t,a.centerPoint.lng=l.point.lng,a.centerPoint.lat=l.point.lat,a.getForExcel()}))},getForExcel(){let e="/task_list.xlsx";this.$http.get(e,{responseType:"arraybuffer"}).then((e=>{let t=new Uint8Array(e.data),a=p().read(t,{type:"array"}),l=[];a.SheetNames.forEach((e=>{l.push({sheetName:e,sheet:p().utils.sheet_to_json(a.Sheets[e],{header:this.importHeader,defval:""})})})),console.log(l),l[0].sheet.shift(),this.setLedgerList(l)})).catch((e=>{this.err=e}))},setLedgerList(e){e[0].sheet.forEach((e=>{this.mapData.push(e)})),this.allData=[...this.mapData],this.handleDataPoint()},handleDataPoint(){let e=this,t=this.BMap,a=this.map,l=new t.Geocoder,n=a.getOverlays(),o=n.length;for(let s=0;s<o;s++)this.expectData.some((e=>e.name===n[s].markName))&&a.removeOverlay(n[s]);if(0===e.mapData.length)return this.$message.error("没有匹配数据"),void(this.fullscreenLoading=!1);for(let s=0;s<e.mapData.length;s++)l.getPoint(e.mapData[s].adress,(function(l){if(l){let n=new t.Marker(l,{title:e.mapData[s].name});n.markName=e.mapData[s].name,a.addOverlay(n),function(){n.addEventListener("mouseover",(function(){e.showInfo(this,e.mapData[s])})),n.addEventListener("mouseout",(function(){this.closeInfoWindow()}))}()}else alert("您选择的地址没有解析到结果！")}));this.fullscreenLoading=!1},showInfo(e,t){let a=this.BMap,l='<ul style="margin:0 0 5px 0;padding:0.2em 0"><li style="line-height: 26px;font-size: 15px;"><span style="display: inline-block;">名称：</span>'+t.name+'</li><li style="line-height: 26px;font-size: 15px;"><span class="labelSty">简称：'+t.shortName+'</span><span class="infoSpan">公司规模：</span>'+t.size+'</li><li style="line-height: 26px;font-size: 15px;"><span class="labelSty">公司性质：'+t.nature+'</span><span class="infoSpan">是否上市：</span>'+t.inMarket+'</li><li style="line-height: 26px;font-size: 15px;"><span class="labelSty">药物大类：'+t.dugClass+'</span><span class="infoSpan">具体类型：</span>'+t.classInfo+'</li><li style="line-height: 26px;font-size: 15px;"><span class="labelSty">早期研发团队：'+t.hasDevTeam+'</span><span class="infoSpan">药理毒理团队：</span>'+t.hasPoisonTeam+'</li><li style="line-height: 26px;font-size: 15px;"><span class="labelSty">CMC团队：'+t.hasCMCTeam+'</span><span class="infoSpan">临床团队：</span>'+t.hasClinicTeam+'</li><li style="line-height: 26px;font-size: 15px;"><span class="labelSty">商业化生产：'+t.hasCommercialProd+'</span><span class="infoSpan">制剂灌装线：</span>'+t.hasPreparationLine+'</li><li style="line-height: 26px;font-size: 15px;"><span>生产规模：</span>'+t.productionSize+'</li><li style="line-height: 26px;font-size: 15px;max-width: 550px;"><span style="display: inline-block;">地址：</span>'+t.adress+"</li></ul>",n=new a.InfoWindow(l);e.openInfoWindow(n)},onSubmit(){this.fullscreenLoading=!0,this.expectData=[],this.mapData=[...this.allData];for(let e in this.form)""!==this.form[e]&&this.filterData(e,this.form[e]);this.handleDataPoint()},filterData(e,t){if("classInfo"===e){if(t.length>0){let a=[];this.mapData.forEach((l=>{t.every((t=>l[e].includes(t)))?a.push(l):this.expectData.push(l)})),this.mapData=a}}else this.mapData=this.mapData.filter((a=>"name"===e||"dugClass"===e?(a[e].includes(t)||this.expectData.push(a),a[e].includes(t)):(a[e]!==t&&this.expectData.push(a),a[e]===t)))},resetData(){this.fullscreenLoading=!0,this.$refs.form.resetFields(),this.mapData=[...this.allData],this.expectData=[],this.handleDataPoint()}}},m=f,h=a(1001),d=(0,h.Z)(m,s,i,!1,null,"1e96cb34",null),v=d.exports,b={name:"App",components:{mapVue:v}},y=b,g=(0,h.Z)(y,n,o,!1,null,null,null),x=g.exports,S=a(4549),D=a.n(S),k=a(6166),L=a.n(k),w=a(8319),C=a.n(w);l["default"].prototype.$http=L(),l["default"].use(D()),l["default"].use(C(),{ak:"0SglCegTnQS2XzQLwDIEY8TVkrK6xWoW"}),l["default"].config.productionTip=!1,new l["default"]({render:e=>e(x)}).$mount("#app")},5382:function(){},2095:function(){},1219:function(){}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var o=t[l]={exports:{}};return e[l].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,l,n,o){if(!l){var s=1/0;for(c=0;c<e.length;c++){l=e[c][0],n=e[c][1],o=e[c][2];for(var i=!0,r=0;r<l.length;r++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(i=!1,o<s&&(s=o));if(i){e.splice(c--,1);var p=n();void 0!==p&&(t=p)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,o,s=l[0],i=l[1],r=l[2],p=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(r)var c=r(a)}for(t&&t(l);p<s.length;p++)o=s[p],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},l=self["webpackChunkbaidumap"]=self["webpackChunkbaidumap"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(8484)}));l=a.O(l)})();
//# sourceMappingURL=app.50e3f58c.js.map